<div id="app">
  <h1>NiCE 創·迴響 互動地圖</h1>
  <div class="legend-container">
    <div class="legend-item"><span class="legend-box legend-default"></span><span>攤位</span></div>
    <div class="legend-item"><span class="legend-box legend-promo"></span><span>宣傳車</span></div>
    <div class="legend-item">
      <span class="legend-box legend-search"></span><span>搜尋結果</span>
    </div>
    <div class="legend-item">
      <span class="legend-box legend-selected"></span><span>選擇中</span>
    </div>
  </div>
  <p id="instructions-text">請與地圖互動以查看攤位資訊。</p>
  <div class="search-container">
    <input
      type="search"
      id="search-input"
      placeholder="搜尋攤位編號、名稱、作者或標籤..."
      aria-label="Search for stalls"
    />
    <button #toggleButton id="toggle-magnifier-btn" (click)="toggleMagnifier()">顯示放大鏡</button>
  </div>

  <!-- Map container: will hold the map image and dynamically injected stall areas -->
  <div id="map-container" #mapContainer>
    <img
      #mapImage
      id="map-image"
      src="https://cdn.jsdelivr.net/gh/v4724/nice-0816@c6b3cd1/assets/stalls-map.jpg"
      alt="Neo iComic Echo Venue Map"
    />
    <!-- Stall areas will be injected here by JS -->

    <!-- Magnifier elements: wrapper handles positioning, lens handles visuals -->
    <app-magnifier></app-magnifier>
  </div>

  <div class="recommendation-note">
    <p>為獲得較佳體驗，建議使用電腦瀏覽器並將視窗寬度調整至 1024px 以上。</p>
  </div>

  <div class="data-source">
    <h3 style="margin-bottom: 0px">資料來源</h3>
    <ul>
      <li>
        <a href="https://starstonetw.weebly.com/" target="_blank" rel="noopener noreferrer"
          >星石文創 NiCE 官網</a
        >
      </li>
    </ul>
  </div>

  <div style="margin-top: 0.5rem">
    <p style="margin-bottom: 0px">
      © 2025 阿圖　｜　本作品由原作者 阿圖 非官方製作，現由 NiCE 創·迴響 正式授權使用。
    </p>
  </div>
</div>

<app-tooptip></app-tooptip>

<!-- Modal dialog: for displaying detailed stall information. Hidden by default. -->
<!-- ARIA attributes ensure it's accessible to screen readers. -->
<app-stall-modal></app-stall-modal>

<!-- Image Lightbox for viewing images in detail -->
<app-lightbox></app-lightbox>
