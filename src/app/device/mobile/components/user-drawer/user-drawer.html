<p-drawer header=" " [(visible)]="visible" position="right" styleClass="!w-full">
  <div class="flex flex-col h-[calc(100vh-150px)] items-center justify-center gap-2">
    <div class="flex flex-col h-1/3 w-full items-center justify-end gap-2">
      <p-avatar icon="pi pi-user" size="xlarge" shape="circle" />
      @if (isLogin()) {
        <div class="flex items-center">嗨！{{ user()?.acc }}</div>
      }
    </div>
    @if (isLogin()) {
      <div class="flex flex-grow flex-col gap-2 px-4 overflow-y-auto">
        <div class="flex flex-grow flex-col gap-2">
          <div class="flex">攤位編號</div>
          <div
            class="flex flex-wrap items-center"
            [ngClass]="{
              'gap-1 gap-y-2 ': (user()?.stallIds ?? []).length > 1,
              'justify-center ': (user()?.stallIds ?? []).length <= 1,
            }"
          >
            @for (id of user()?.stallIds; track $index) {
              <div
                class="rounded-full py-1 px-2 border border-gray-400 transition hover:scale-110 cursor-default"
                (click)="selectAndFocus(id)"
              >
                {{ id }}
              </div>
            }
          </div>
        </div>
      </div>
    } @else {
      <div class="flex flex-grow flex-col gap-2 px-4">
        <input
          #loginInput
          pInputText
          [(ngModel)]="acc"
          type="text"
          pSize="small"
          placeholder="使用者"
        />
      </div>
    }
  </div>

  <ng-template #footer>
    <div class="w-full flex flex-row justify-between h-12 shadow-[0_-1px_5px_rgba(0,0,0,0.1)]">
      @if (isLogin()) {
        <button pButton class="block w-1/3" (click)="delete()">刪除</button>
        <button pButton class="block w-1/3" (click)="edit()">編輯</button>
        <button pButton class="block w-1/3" (click)="logout()">登出</button>
      } @else {
        <button pButton class="block w-full" (click)="create()">新增</button>
        <button pButton class="block w-full" (click)="login()">登入</button>
      }
    </div>
  </ng-template>
</p-drawer>
