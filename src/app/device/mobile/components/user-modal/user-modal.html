<ion-modal
  #modal
  trigger="user-modal-trigger"
  [enterAnimation]="enterAnimation"
  [leaveAnimation]="leaveAnimation"
>
  <ng-template>
    <ion-content>
      <div class="flex w-full justify-end px-1">
        <ion-button
          class="ml-auto"
          aria-label="Back"
          fill="outline"
          shape="round"
          (click)="modal.dismiss()"
        >
          <ion-icon slot="icon-only" name="close" aria-hidden="true"></ion-icon>
        </ion-button>
      </div>
      <div class="flex flex-col h-9/10 items-center justify-center">
        <div class="flex w-full justify-center">user icon</div>
        @if (isLogin()) {
          <div class="flex flex-col gap-2 px-4">
            <div class="flex justify-center">嗨！{{ user()?.acc }}</div>
            <div class="flex flex-col gap-2">
              <div class="flex">攤位編號</div>
              <div class="flex flex-wrap items-center gap-1 gap-y-2">
                @for (id of user()?.stallIds; track $index) {
                  <div
                    class="rounded-full py-1 px-2 border border-gray-400 transition hover:scale-110 cursor-default"
                    (click)="selectAndFocus(id)"
                  >
                    {{ id }}
                  </div>
                }
              </div>
            </div>
          </div>
        } @else {
          <div class="flex flex-col gap-2 px-4">
            <input
              #loginInput
              pInputText
              [(ngModel)]="acc"
              type="text"
              pSize="small"
              placeholder=""
            />
          </div>
        }
      </div>
    </ion-content>
    <ion-footer>
      <ion-toolbar>
        <ion-buttons class="flex flex-row justify-between">
          @if (isLogin()) {
            <ion-button class="w-1/3" (click)="delete()">刪除</ion-button>
            <ion-button class="w-1/3" (click)="edit()">編輯</ion-button>
            <ion-button class="w-1/3" (click)="logout()"> 登出 </ion-button>
          } @else {
            <ion-button class="w-full" (click)="create()">新增</ion-button>
            <ion-button class="w-full" (click)="login()">登入</ion-button>
          }
        </ion-buttons>
      </ion-toolbar>
    </ion-footer>
  </ng-template>
</ion-modal>
