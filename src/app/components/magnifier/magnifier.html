<div
  id="magnifier-wrapper"
  #magnifierWrapper
  [class.hidden]="hidden()"
  appDraggable
  (dragAnimationLoop)="setPosition($event)"
>
  <div
    id="magnifier"
    #magnifier
    [style.backgroundImage]="mapImageSrc()"
    [style.backgroundSize]="`${scaleMapImgW()}px ${scaleMapImgH()}px`"
  >
    <div
      id="magnifier-stall-layer"
      #magnifierStallLayer
      [style.width.px]="mapImgW()"
      [style.height.px]="mapImgH()"
    >
      @for (stall of allStalls$ | async; track $index) {
        <app-stall [stall]="stall" [absolutePosition]="true" [hiddenIfGrouped]="true"></app-stall>
      }
      @for (zone of stallGridRefs() ?? []; track $index) {
        <app-stall-group-area [zone]="zone"></app-stall-group-area>
      }
    </div>
  </div>
  <div [style.position]="'relative'" [style.height]="'100%'" [style.width.px]="0">
    <app-group-indicator></app-group-indicator>
  </div>

  <div id="magnifier-marker"></div>
</div>
